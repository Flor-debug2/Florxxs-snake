<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Florxxs Snake</title>
<style>
  :root {
    --bg: #0b0b0b;
    --snake: #ff3b3b;
    --food: #3bff59;
    --grid: rgba(255,255,255,0.05);
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { display:flex; justify-content:center; align-items:center; height:100vh; background: linear-gradient(180deg, #050505 0%, #0d0d0d 100%); font-family: sans-serif; color: #eee; }
  canvas { background: var(--bg); border-radius: 12px; box-shadow: 0 6px 30px rgba(0,0,0,0.5); }
  .scoreboard { position:absolute; top:20px; text-align:center; width:100%; font-size:18px; letter-spacing:1px; color:#fff; }
</style>
</head>
<body>
<div class="scoreboard" id="scoreboard">Score: 0</div>
<canvas id="game" width="600" height="600"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const gridSize = 20;
const tileCount = canvas.width / gridSize;
let snake = [{x:10, y:10}];
let dx = 1, dy = 0;
let food = {x:15, y:15};
let score = 0;
let speed = 5;
let lastFrameTime = 0;
let directionQueue = [];

function resetGame(){
  snake = [{x:10, y:10}];
  dx = 1; dy = 0;
  score = 0;
  placeFood();
  directionQueue = [];
  document.getElementById('scoreboard').innerText = 'Score: 0';
}

function placeFood(){
  food.x = Math.floor(Math.random() * tileCount);
  food.y = Math.floor(Math.random() * tileCount);
  // Avoid placing on snake
  if(snake.some(segment => segment.x === food.x && segment.y === food.y)) placeFood();
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // Draw grid
  ctx.strokeStyle = 'var(--grid)';
  ctx.lineWidth = 1;
  for(let i=0;i<=tileCount;i++){
    ctx.beginPath();
    ctx.moveTo(i*gridSize,0);
    ctx.lineTo(i*gridSize,canvas.height);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(0,i*gridSize);
    ctx.lineTo(canvas.width,i*gridSize);
    ctx.stroke();
  }
  // Draw food
  ctx.fillStyle = 'var(--food)';
  ctx.fillRect(food.x*gridSize, food.y*gridSize, gridSize, gridSize);
  // Draw snake
  ctx.fillStyle = 'var(--snake)';
  snake.forEach((segment,index)=>{
    ctx.fillRect(segment.x*gridSize, segment.y*gridSize, gridSize, gridSize);
  });
}

function update(){
  // Handle direction queue
  if(directionQueue.length){
    const newDir = directionQueue.shift();
    if((dx===0 && newDir.x!==0) || (dy===0 && newDir.y!==0)){
      dx=newDir.x; dy=newDir.y;
    }
  }
  // Move snake
  const head = {x: snake[0].x + dx, y: snake[0].y + dy};
  // Wrap around edges
  head.x = (head.x + tileCount) % tileCount;
  head.y = (head.y + tileCount) % tileCount;
  // Check collision
  if(snake.some(segment => segment.x===head.x && segment.y===head.y)){
    resetGame();
    return;
  }
  snake.unshift(head);
  // Check food
  if(head.x===food.x && head.y===food.y){
    score++; document.getElementById('scoreboard').innerText='Score: '+score;
    placeFood();
    // Speed up every 5 points
    if(score % 5 === 0) speed+=0.5;
  } else {
    snake.pop();
  }
}

function gameLoop(time){
  requestAnimationFrame(gameLoop);
  if(time - lastFrameTime < 1000/speed) return;
  lastFrameTime = time;
  update();
  draw();
}

window.addEventListener('keydown', e=>{
  switch(e.key){
    case 'ArrowUp': directionQueue.push({x:0,y:-1}); break;
    case 'ArrowDown': directionQueue.push({x:0,y:1}); break;
    case 'ArrowLeft': directionQueue.push({x:-1,y:0}); break;
    case 'ArrowRight': directionQueue.push({x:1,y:0}); break;
  }
});

canvas.addEventListener('touchstart', handleTouchStart,false);
canvas.addEventListener('touchmove', handleTouchMove,false);
let xStart = null; let yStart = null;
function handleTouchStart(e){ xStart = e.touches[0].clientX; yStart = e.touches[0].clientY; }
function handleTouchMove(e){
  if(!xStart || !yStart) return;
  let dxTouch = e.touches[0].clientX - xStart;
  let dyTouch = e.touches[0].clientY - yStart;
  if(Math.abs(dxTouch) > Math.abs(dyTouch)){
    if(dxTouch>0) directionQueue.push({x:1,y:0});
    else directionQueue.push({x:-1,y:0});
  } else {
    if(dyTouch>0) directionQueue.push({x:0,y:1});
    else directionQueue.push({x:0,y:-1});
  }
  xStart = null; yStart = null;
}

resetGame();
requestAnimationFrame(gameLoop);
</script>
</body>
</html>
